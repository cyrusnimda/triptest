{% extends 'JosuTestWebBundle::base.html.twig' %}

{% block body %}
	<div>
		<div>
			<div class="panel panel-info col-sm-6">
		      <div class="panel-heading">
		        <h3 id="panel-title" class="panel-title">Basic info<a class="anchorjs-link" href="#panel-title"><span class="anchorjs-icon"></span></a></h3>
		      </div>
		      <div class="panel-body">
		        
				<form method="post" class="form-horizontal" role="form">
					<div class="form-group">
					  <label class="control-label col-sm-2" for="name">Name:</label>
					  <div class="col-sm-10">
					    <input type="text" name="_username" class="form-control" value="{{ customer.name}}">
					  </div>
					</div>
					<div class="form-group">
					  <label class="control-label col-sm-2" for="pwd">Address:</label>
					  <div class="col-sm-10">          
					    <input type="text" name="address" class="form-control"  value="{{ customer.address}}">
					  </div>
					</div>

					<div class="form-group">
					  <label class="control-label col-sm-2" for="pwd">City:</label>
					  <div class="col-sm-10">          
					    <input type="text" name="city" class="form-control" value="{{ customer.city}}" >
					  </div>
					</div>

					<div class="form-group">
					  <label class="control-label col-sm-2" for="pwd">Country:</label>
					  <div class="col-sm-10">          
					    <input type="text" name="country" class="form-control" value="{{ customer.country}}" >
					  </div>
					</div>
				</form>


		      </div>
		    </div>


		    <div class="panel panel-info col-sm-10">
		      <div class="panel-heading">
		        <h3 id="panel-title" class="panel-title">Passengers<a class="anchorjs-link" href="#panel-title"><span class="anchorjs-icon"></span></a></h3>
		      </div>
		      <div class="panel-body">
		        
				<table class="table">
					<tr>
						<th>Title</th>
						<th>First Name</th>
						<th>Surname</th>
						<th>Pastport ID</th>
						<th>Options</th>
					</tr>
					{% for passenger in passengers %}
					<tr>
						<td>{{passenger.title}}</td>
						<td>{{passenger.firstname}}</td>
						<td>{{passenger.surname}}</td>
						<td>{{passenger.passportid}}</td>
						<td><a data-href="passenger/delete/{{ passenger.id }}" data-toggle="modal" data-target="#confirm-delete" href="#">
							        		<button class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</button></a>
						</td>
					</tr>
					{% endfor%}
				</table>
				<a data-toggle="modal" data-target="#add-passenger" href="#"><button class="btn btn-success pull-right">Add</button></a>


		      </div>
		    </div>

		    <div class="panel panel-info col-sm-10">
		      <div class="panel-heading">
		        <h3 id="panel-title" class="panel-title">Trips<a class="anchorjs-link" href="#panel-title"><span class="anchorjs-icon"></span></a></h3>
		      </div>
		      <div class="panel-body">

				<table class="table">
					<tr>
						<th>From</th>
						<th>To</th>
						<th>Departure</th>
						<th>Arrival</th>
						<th>Passengers</th>
						<th></th>
					</tr>
					{% for trip in trips %}
					<tr>
						<td>{{trip.departureAirport}}</td>
						<td>{{trip.destinationAirport}}</td>
						<td>{{trip.departureDate | date('d/M/Y') }}</td>
						<td>{{trip.arrivalDate | date('d/M/Y') }}</td>
						<td>
							{% for passenger in trip.passengers %}
								{{passenger.title}} {{passenger.firstname}} {{passenger.surname}}
								{% if loop.last == false %}
								,
								{% endif %}
							{% endfor%}
						</td>
						<td><a data-href="trip/delete/{{ trip.id }}" data-toggle="modal" data-target="#confirm-delete-trip" href="#">
							        		<button class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</button></a>
						</td>
					</tr>
					{% endfor%}
				</table>
				<a data-toggle="modal" data-target="#add-trip" href="#"><button class="btn btn-success pull-right">Add</button></a>


		      </div>
		    </div>
			
		</div>

		

	</div>

	

	<div class="modal fade" id="add-passenger" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		    <div class="modal-dialog">
		        <div class="modal-content">
		            <div class="modal-header">
		                <strong>Add passsenger</strong>
		            </div>
		            <div class="modal-body">
		                {{ form_start(form) }}
						{{ form_widget(form) }}
						{{ form_end(form) }}
		            </div>
		            <div class="modal-footer">
		                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		            </div>
		        </div>
		    </div>
		</div>
	</div>

	<div class="modal fade" id="add-trip" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		    <div class="modal-dialog">
		        <div class="modal-content">
		            <div class="modal-header">
		                <strong>Add trip</strong>
		            </div>
		            <div class="modal-body">
		              	{{ form_start(tripForm) }}
						{{ form_widget(tripForm) }}
						{{ form_end(tripForm) }}
		            </div>
		            <div class="modal-footer">
		                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		            </div>
		        </div>
		    </div>
		</div>
	</div>

	<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		    <div class="modal-dialog">
		        <div class="modal-content">
		            <div class="modal-header">
		                <strong>Alert</strong>
		            </div>
		            <div class="modal-body">
		            	Do you want to delete this passenger?, this proccess won't be undone.
		                
		            </div>
		            <div class="modal-footer">
		                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		                <a href="#" class="btn btn-danger danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</a>
		            </div>
		        </div>
		    </div>
		</div>
	</div>

	<div class="modal fade" id="confirm-delete-trip" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		    <div class="modal-dialog">
		        <div class="modal-content">
		            <div class="modal-header">
		                <strong>Alert</strong>
		            </div>
		            <div class="modal-body">
		            	Do you want to delete this trip?, this proccess won't be undone.
		                
		            </div>
		            <div class="modal-footer">
		                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		                <a href="#" class="btn btn-danger danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</a>
		            </div>
		        </div>
		    </div>
		</div>
	</div>
{% endblock %}

{% block javascripts_section %}

	<script>
		$( document ).ready(function() {
			// popup for delete passengers
			$('#confirm-delete').on('show.bs.modal', function(e) {
			    $(this).find('.danger').attr('href', $(e.relatedTarget).data('href'));
			});

			// popup for delete trips
			$('#confirm-delete-trip').on('show.bs.modal', function(e) {
			    $(this).find('.danger').attr('href', $(e.relatedTarget).data('href'));
			});

		});



	</script>

{% endblock %}